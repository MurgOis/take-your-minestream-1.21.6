# Рендер фоновой панели (9-slice background texture) для сообщений в Minecraft 1.21.7 (Fabric)

## Задача

Реализовать отрисовку панели под текстом сообщений с помощью 9-slice техники, чтобы панель могла растягиваться под любой размер текста, используя текстуру `message_panel.png` (32x32, углы по 8x8).

## Основные шаги

1. **Подготовка текстуры**

   - Используется текстура `message_panel.png` размером 32x32 пикселя.
   - Каждый угол — квадрат 8x8, края и центр — растягиваются.

2. **Первые попытки (устаревшие подходы)**

   - Пробовали использовать прямые вызовы OpenGL (`GL11.glBegin`, `glVertex`, `glEnd`).
   - Пробовали привязывать текстуру через разные методы (`bindTexture`, `setShaderTexture`, прямой доступ к glId).
   - Столкнулись с ошибками: отсутствие методов, несовместимость с GL-контекстом, краши.

3. **Переход на современный рендеринг**

   - В новых версиях Minecraft/Fabric запрещено использовать прямой OpenGL.
   - Для рендера 2D-элементов в мире используется только `VertexConsumer` и `RenderLayer`.

4. **Финальное решение**
   - Для каждого из 9 сегментов панели вызывается `drawQuadGL`, который рендерит quad через `VertexConsumer`:
     ```java
     VertexConsumer consumer = consumers.getBuffer(RenderLayer.getEntityTranslucent(PANEL_TEXTURE));
     consumer.vertex(matrix, x, y, z)
             .color(1f, 1f, 1f, alpha)
             .texture(u, v)
             .overlay(OverlayTexture.DEFAULT_UV)
             .light(0xF000F0)
             .normal(0, 0, -1);
     ```
   - Вызовы `.next()` больше не нужны — каждая вершина завершается автоматически.
   - Привязка текстуры происходит через сам RenderLayer, а не вручную.
   - Весь рендеринг панели теперь полностью совместим с Minecraft 1.21.7 и Fabric API.

## Итог

- Панель корректно растягивается под любой размер текста.
- Нет крашей, нет устаревших вызовов OpenGL.
- Код легко поддерживать и расширять.

---

**Если потребуется добавить другие эффекты или стили — используйте тот же подход через VertexConsumer и RenderLayer!**
